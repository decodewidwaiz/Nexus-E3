# Campus Commute Frontend Architecture & Feature Map

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAMPUS COMMUTE - FRONTEND                    â”‚
â”‚                   (React + TypeScript + Tailwind)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  React App   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                  â”‚                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
          â”‚   AuthContext  â”‚  â”‚ ThemeContext â”‚  â”‚  Navigation â”‚
          â”‚                â”‚  â”‚              â”‚  â”‚              â”‚
          â”‚  User Data     â”‚  â”‚  Dark Mode   â”‚  â”‚  Routes      â”‚
          â”‚  Auth State    â”‚  â”‚  Persistence â”‚  â”‚  Navigation  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                  â”‚                  â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚              PAGES & COMPONENTS                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Home Page        â”‚  â”‚ RouteSelection  â”‚  â”‚ DriverInfo   â”‚
    â”‚ â”œâ”€ ETA Display     â”‚  â”‚ â”œâ”€ Route List   â”‚  â”‚ â”œâ”€ Driver    â”‚
    â”‚ â”œâ”€ Route Info      â”‚  â”‚ â”œâ”€ Details      â”‚  â”‚ â”œâ”€ Conductor â”‚
    â”‚ â”œâ”€ Bottom Sheet    â”‚  â”‚ â”œâ”€ Conductor    â”‚  â”‚ â”œâ”€ Bus       â”‚
    â”‚ â”œâ”€ Status Chip     â”‚  â”‚ â””â”€ ETA Display  â”‚  â”‚ â””â”€ Call Btns â”‚
    â”‚ â””â”€ Route Details   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚    Modal           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         COMPONENTS (Reusable)                         â”‚
    â”‚                                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚   RouteMap       â”‚      â”‚ RouteDetailsModal    â”‚   â”‚
    â”‚  â”‚                  â”‚      â”‚                      â”‚   â”‚
    â”‚  â”‚ Leaflet.js       â”‚      â”‚ Route Information    â”‚   â”‚
    â”‚  â”‚ Stop Markers     â”‚      â”‚ Conductor Details    â”‚   â”‚
    â”‚  â”‚ Route Lines      â”‚      â”‚ ETA Display          â”‚   â”‚
    â”‚  â”‚ Interactive      â”‚      â”‚ Bus & Driver Info    â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                         â”‚
    â”‚  Plus: AppSidebar, BackButton, GradientButton, etc.   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         DATA LAYER (localStorage)                      â”‚
    â”‚                                                         â”‚
    â”‚  â”œâ”€ adminRoutes (Route data with conductor & ETA)     â”‚
    â”‚  â”œâ”€ campus-commute-accounts (User accounts)           â”‚
    â”‚  â””â”€ campus-commute-theme (Theme preference)           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Feature Flow Diagram

### 1. CONDUCTOR CALL FEATURE FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Views Driver Info Page                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Fetch user route  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Search adminRoutes by      â”‚
         â”‚ route number               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                         â”‚
   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚ Found  â”‚            â”‚  Not Found  â”‚
   â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚                         â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Extract      â”‚        â”‚ Show "Conductorâ”‚
  â”‚ conductor    â”‚        â”‚ not assigned"  â”‚
  â”‚ details      â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Display Conductor    â”‚
  â”‚ Info in Page         â”‚
  â”‚ â””â”€ Name              â”‚
  â”‚ â””â”€ "Call" Button     â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ User clicks          â”‚
  â”‚ "Call Conductor"     â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Validate Phone       â”‚
  â”‚ Format: +91XXXXXXXXX â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ window.location.href â”‚
  â”‚ = tel:+91XXXXXXXXX   â”‚
  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phone Dialer Opens   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ETA DISPLAY FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Student Opens Home Page  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Fetch user       â”‚
    â”‚ route number     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Search adminRoutes for route â”‚
    â”‚ matching student's routeNo   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
         â”Œâ”€â”€â–¼â”€â”€â”€â”
         â”‚Found?â”‚
         â””â”€â”€â”¬â”€â”€â”€â”˜
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚
   Yes             No
    â”‚               â”‚
 â”Œâ”€â”€â–¼â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
 â”‚Get  â”‚      â”‚Use defaultâ”‚
 â”‚ETA  â”‚      â”‚ETA (10 min)â”‚
 â””â”€â”€â”¬â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
    â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Display in UI:       â”‚
    â”‚ â”œâ”€ Status chip       â”‚
    â”‚ â”œâ”€ Bottom sheet      â”‚
    â”‚ â””â”€ Route Details Mdl â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ "Reaching your stop â”‚
    â”‚  in {eta} minutes"  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ROUTE DETAILS MODAL FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User on Home/RouteSelection  â”‚
â”‚ Clicks "View Route Details"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Open RouteDetailsModal   â”‚
    â”‚ with route data          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Modal Displays:          â”‚
    â”‚ â”œâ”€ Route number          â”‚
    â”‚ â”œâ”€ All stops (numbered)  â”‚
    â”‚ â”œâ”€ Timing                â”‚
    â”‚ â”œâ”€ ETA                   â”‚
    â”‚ â”œâ”€ Bus number            â”‚
    â”‚ â”œâ”€ Driver name           â”‚
    â”‚ â””â”€ Conductor info        â”‚
    â”‚    â”œâ”€ Name               â”‚
    â”‚    â””â”€ Phone (clickable)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User can:               â”‚
    â”‚ â”œâ”€ Click conductor phoneâ”‚
    â”‚ â”œâ”€ Close modal          â”‚
    â”‚ â””â”€ View full details    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. MAP VISUALIZATION FLOW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RouteMap Component Mounted   â”‚
â”‚ with stops data              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Initialize Leaflet Map   â”‚
    â”‚ Set center & zoom        â”‚
    â”‚ Load OSM tiles           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Create Stop Markers      â”‚
    â”‚ For each stop:           â”‚
    â”‚ â”œâ”€ Get lat/lng           â”‚
    â”‚ â”œâ”€ Determine status      â”‚
    â”‚ â”œâ”€ Create icon           â”‚
    â”‚ â”œâ”€ Add popup             â”‚
    â”‚ â””â”€ Add to map            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Draw Route Polylines     â”‚
    â”‚ â”œâ”€ Completed (solid)     â”‚
    â”‚ â””â”€ Remaining (dotted)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Auto-fit Bounds          â”‚
    â”‚ Show all stops on map    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Map Ready for Interactionâ”‚
    â”‚ User can:                â”‚
    â”‚ â”œâ”€ Zoom in/out           â”‚
    â”‚ â”œâ”€ Pan around            â”‚
    â”‚ â””â”€ Click stops for info  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Architecture

```
ADMIN PANEL                    DATA STORAGE              STUDENT/USER PAGES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create/Edit â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ adminRoutes  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Home Page      â”‚
â”‚ Route with: â”‚               â”‚ (localStorage)â”‚          â”‚ â”œâ”€ ETA        â”‚
â”‚ â”œâ”€ Conductorâ”‚               â”‚              â”‚          â”‚ â”œâ”€ Route Info â”‚
â”‚ â”œâ”€ Phone    â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â””â”€ Details    â”‚
â”‚ â””â”€ ETA      â”‚                      â–²                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚                   â”‚ RouteSelection â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Shows all      â”‚
                                                         â”‚ route details  â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                         â”‚ Driver Info    â”‚
                                                         â”‚ Shows conductorâ”‚
                                                         â”‚ Can call       â”‚
                                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Component Hierarchy

```
App.tsx
â”œâ”€â”€ MobileLayout
â”‚   â”œâ”€â”€ AuthContext
â”‚   â””â”€â”€ ThemeContext
â”‚
â”œâ”€â”€ Pages (Router)
â”‚   â”œâ”€â”€ Home
â”‚   â”‚   â”œâ”€â”€ RouteMap (optional future use)
â”‚   â”‚   â”œâ”€â”€ RouteDetailsModal (NEW)
â”‚   â”‚   â”œâ”€â”€ AppSidebar
â”‚   â”‚   â””â”€â”€ NotificationSheet
â”‚   â”‚
â”‚   â”œâ”€â”€ RouteSelection
â”‚   â”‚   â””â”€â”€ RouteDetailsModal (NEW)
â”‚   â”‚
â”‚   â”œâ”€â”€ DriverInfo
â”‚   â”‚   â””â”€â”€ (Updated with conductor logic)
â”‚   â”‚
â”‚   â”œâ”€â”€ AdminPanel
â”‚   â”‚   â””â”€â”€ (Updated with conductor & ETA forms)
â”‚   â”‚
â”‚   â””â”€â”€ Other pages...
â”‚
â””â”€â”€ Components
    â”œâ”€â”€ RouteMap (NEW)
    â”œâ”€â”€ RouteDetailsModal (NEW)
    â”œâ”€â”€ AppSidebar
    â”œâ”€â”€ BackButton
    â”œâ”€â”€ GradientButton
    â”œâ”€â”€ MobileLayout
    â””â”€â”€ ui/* (shadcn components)
```

---

## ğŸ¯ State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ROOT CONTEXT PROVIDERS         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ AuthContext  â”‚    â”‚ ThemeContext    â”‚
    â”‚              â”‚    â”‚                 â”‚
    â”‚ State:       â”‚    â”‚ State:          â”‚
    â”‚ - user       â”‚    â”‚ - theme         â”‚
    â”‚ - isAuth     â”‚    â”‚ - setTheme      â”‚
    â”‚ - login()    â”‚    â”‚ - localStorage  â”‚
    â”‚ - logout()   â”‚    â”‚   persistence   â”‚
    â”‚ - updateUser â”‚    â”‚                 â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚                   â”‚
    Pages use   Pages use       Component State
    Auth        Theme           (useState)
    Context     Context         â”œâ”€ Home:
                                â”‚  - eta
                                â”‚  - routeInfo
                                â”‚  - showRouteDetails
                                â”‚
                                â”œâ”€ RouteSelection:
                                â”‚  - selectedId
                                â”‚  - routes
                                â”‚
                                â””â”€ AdminPanel:
                                   - conductorName
                                   - conductorPhone
                                   - eta
```

---

## ğŸŒ API Integration Points (Future)

```
Current: localStorage
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚
   Data Layer       Service Layer
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚local    â”‚ vs  â”‚ REST API â”‚
   â”‚Storage  â”‚     â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
           React Component
           (same interface)

When backend is ready:
1. Replace localStorage.getItem() with fetch()
2. Use async/await for API calls
3. Add loading states
4. Add error handling
5. WebSocket for real-time ETA
```

---

## ğŸ“Š Data Model Relationships

```
User (AuthContext)
â”œâ”€â”€ role: "student" | "driver"
â”œâ”€â”€ email: string
â”œâ”€â”€ phoneNumber: string
â”œâ”€â”€ routeNo: string  â”€â”€â”€â”€â”€â”€â”
â””â”€â”€ fullName: string       â”‚
                           â”‚
                           â”œâ”€â”€> Route (adminRoutes[])
                           â”‚    â”œâ”€â”€ number: "Route 1"
                           â”‚    â”œâ”€â”€ stops: string[]
                           â”‚    â”œâ”€â”€ timing: string
                           â”‚    â”œâ”€â”€ eta: number
                           â”‚    â”œâ”€â”€ conductorName: string
                           â”‚    â”œâ”€â”€ conductorPhone: string
                           â”‚    â”œâ”€â”€ assignedDriver: string
                           â”‚    â””â”€â”€ assignedBus: string
                           â”‚
                           â””â”€â”€> Driver (registeredAccounts[])
                                â”œâ”€â”€ name: string
                                â”œâ”€â”€ phone: string
                                â”œâ”€â”€ busNumber: string
                                â””â”€â”€ routeNo: string
```

---

## ğŸ” Data Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     localStorage (Client-side)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  adminRoutes                        â”‚
â”‚  â”œâ”€ Route data (public)             â”‚
â”‚  â”œâ”€ Conductor name (semi-public)    â”‚
â”‚  â”œâ”€ Conductor phone (protected)     â”‚
â”‚  â””â”€ ETA (public)                    â”‚
â”‚                                     â”‚
â”‚  campus-commute-accounts            â”‚
â”‚  â”œâ”€ Email (semi-sensitive)          â”‚
â”‚  â”œâ”€ Password (NOT ENCRYPTED)        â”‚
â”‚  â”œâ”€ Phone (sensitive)               â”‚
â”‚  â””â”€ Profile data (semi-public)      â”‚
â”‚                                     â”‚
â”‚  campus-commute-theme               â”‚
â”‚  â””â”€ Theme preference (non-sensitive)â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Future: Migrate to Backend
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Secure Backend API (HTTPS)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”œâ”€ Encrypted password storage      â”‚
â”‚  â”œâ”€ JWT authentication              â”‚
â”‚  â”œâ”€ Role-based access control       â”‚
â”‚  â”œâ”€ Data validation                 â”‚
â”‚  â””â”€ Audit logging                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI Component Tree

```
RouteDetailsModal
â”œâ”€â”€ Dialog (Radix)
â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â””â”€â”€ Title
â”‚   â”œâ”€â”€ Content
â”‚   â”‚   â”œâ”€â”€ Route Info
â”‚   â”‚   â”‚   â”œâ”€â”€ Route Number
â”‚   â”‚   â”‚   â””â”€â”€ Description
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Stops Section
â”‚   â”‚   â”‚   â”œâ”€â”€ MapPin Icon
â”‚   â”‚   â”‚   â””â”€â”€ Stop List
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Info Grid (2 columns)
â”‚   â”‚   â”‚   â”œâ”€â”€ Timing
â”‚   â”‚   â”‚   â””â”€ ETA (optional)
â”‚   â”‚   â”‚   â”œâ”€ Bus (optional)
â”‚   â”‚   â”‚   â””â”€ Driver (optional)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ Conductor Section (optional)
â”‚   â”‚   â”‚   â”œâ”€ Conductor Name
â”‚   â”‚   â”‚   â””â”€ Phone (clickable)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€ Close Button
â”‚   â”‚       â””â”€ Primary button
â”‚   â”‚
â”‚   â””â”€â”€ Footer (implicit)
â”‚       â””â”€ Close on backdrop click

RouteMap
â”œâ”€â”€ Leaflet Map Container
â”‚   â”œâ”€â”€ TileLayer (OSM)
â”‚   â”œâ”€â”€ Markers (SVG-based)
â”‚   â”‚   â”œâ”€ Marker Group (Passed)
â”‚   â”‚   â”œâ”€ Marker Group (Current - animated)
â”‚   â”‚   â””â”€ Marker Group (Upcoming)
â”‚   â”œâ”€â”€ Polylines
â”‚   â”‚   â”œâ”€ Completed Route (solid)
â”‚   â”‚   â””â”€ Remaining Route (dotted)
â”‚   â”œâ”€â”€ Popups (on click)
â”‚   â”‚   â””â”€ Stop Info
â”‚   â””â”€ Legend (implicit)
```

---

## ğŸš€ Performance Optimization

```
Code Splitting
â”œâ”€â”€ Route-based (automatic with React Router)
â”œâ”€â”€ Component lazy loading (optional future)
â””â”€â”€ Bundle analysis (webpack-bundle-analyzer)

Caching Strategy
â”œâ”€â”€ LocalStorage for routes data
â”œâ”€â”€ Browser cache for static assets
â””â”€â”€ Service Worker for PWA (if enabled)

Rendering Optimization
â”œâ”€â”€ React.memo for RouteDetailsModal
â”œâ”€â”€ useCallback for event handlers
â”œâ”€â”€ useEffect cleanup for map
â””â”€â”€ Conditional rendering for optional components

Asset Optimization
â”œâ”€â”€ Minified CSS (65.41 KB â†’ 11.35 KB gzipped)
â”œâ”€â”€ Minified JS (533.23 KB â†’ 154.87 KB gzipped)
â”œâ”€â”€ Tree-shaking for unused code
â””â”€â”€ Image optimization (future: lazy loading)
```

---

## ğŸ“ˆ Scalability Plan

```
Current (v1.0 - Complete)
â”œâ”€ localStorage-based
â”œâ”€ Single-user focus
â””â”€ Static route data

Next (v1.1 - Planned)
â”œâ”€ Backend API integration
â”œâ”€ Real-time location tracking
â””â”€ WebSocket for live ETA

Future (v2.0 - Suggested)
â”œâ”€ Multi-language support
â”œâ”€ Advanced analytics
â”œâ”€ AI-based route optimization
â””â”€ Mobile app (React Native)
```

---

**Document**: Campus Commute Frontend Architecture  
**Version**: 1.0  
**Status**: Complete  
**Last Updated**: December 25, 2025

